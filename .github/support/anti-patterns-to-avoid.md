# Anti-Patterns to Avoid - AI Guidelines

## Deprecated Next.js Patterns

### ❌ NEVER Suggest Pages Router

When generating Next.js code, always use App Router patterns:

```tsx
// ❌ INCORRECT - Pages Router is deprecated
// pages/index.js
export default function Home() {
  return <div>Home</div>;
}

export async function getServerSideProps() {
  return { props: {} };
}

export async function getStaticProps() {
  return { props: {} };
}

// ✅ CORRECT - Use App Router instead
// app/page.tsx
export default async function HomePage() {
  // Direct data fetching in Server Component
  const data = await fetch("https://api.example.com/data");
  return <div>Home</div>;
}
```

### ❌ DO NOT Use Outdated Data Fetching

```tsx
// ❌ INCORRECT - Old Next.js patterns
import { useEffect, useState } from "react";

function OldDataFetching() {
  const [data, setData] = useState(null);

  useEffect(() => {
    fetch("/api/data")
      .then((res) => res.json())
      .then(setData);
  }, []);

  return <div>{data}</div>;
}

// ✅ CORRECT - Modern App Router pattern
export default async function ModernDataFetching() {
  const data = await fetch("/api/data");
  const result = await data.json();

  return <div>{result}</div>;
}
```

## React Anti-Patterns

### ❌ Avoid Unnecessary Client Components

```tsx
// ❌ INCORRECT - Unnecessary 'use client'
"use client";
export function StaticComponent() {
  return <div>This doesn't need client-side JavaScript</div>;
}

// ✅ CORRECT - Server Component by default
export function StaticComponent() {
  return <div>This renders on the server</div>;
}
```

### ❌ Don't Mix Server and Client Boundaries Incorrectly

```tsx
// ❌ INCORRECT - Server Component importing Client Component with server-only data
import { ClientComponent } from "./client-component";

export default async function ServerComponent() {
  const secretData = await fetch("internal://secret-api");
  // This would expose server data to client!
  return <ClientComponent secretData={secretData} />;
}

// ✅ CORRECT - Keep server data on server
import { ClientComponent } from "./client-component";

export default async function ServerComponent() {
  const publicData = await fetch("/api/public-data");
  return <ClientComponent publicData={publicData} />;
}
```

## TypeScript Anti-Patterns

### ❌ Never Use `any` Type

```tsx
// ❌ INCORRECT - Using any type
function processData(data: any) {
  return data.whatever;
}

// ✅ CORRECT - Proper typing
interface UserData {
  id: string;
  name: string;
  email: string;
}

function processData(data: UserData) {
  return data.name;
}
```

### ❌ Avoid Non-null Assertions Without Good Reason

```tsx
// ❌ INCORRECT - Unsafe non-null assertion
function getUser(id: string) {
  const user = users.find((u) => u.id === id)!;
  return user.name; // Could crash if user not found
}

// ✅ CORRECT - Proper null handling
function getUser(id: string): string | null {
  const user = users.find((u) => u.id === id);
  return user ? user.name : null;
}
```

## Component Anti-Patterns

### ❌ Don't Modify Shadcn/ui Components Directly

```tsx
// ❌ INCORRECT - Modifying files in components/ui/
// components/ui/button.tsx - DO NOT EDIT THIS FILE

// ✅ CORRECT - Create custom component that extends
// components/custom/custom-button.tsx
import { Button, ButtonProps } from "@/components/ui/button";

interface CustomButtonProps extends ButtonProps {
  loading?: boolean;
}

export function CustomButton({
  loading,
  children,
  ...props
}: CustomButtonProps) {
  return (
    <Button {...props} disabled={loading || props.disabled}>
      {loading && <Loader2 className="mr-2 h-4 w-4 animate-spin" />}
      {children}
    </Button>
  );
}
```

### ❌ Avoid Prop Drilling

```tsx
// ❌ INCORRECT - Excessive prop drilling
function App() {
  const user = useUser();
  return <Layout user={user} />;
}

function Layout({ user }) {
  return <Header user={user} />;
}

function Header({ user }) {
  return <UserMenu user={user} />;
}

// ✅ CORRECT - Use Context or state management
const UserContext = createContext();

function App() {
  const user = useUser();
  return (
    <UserContext.Provider value={user}>
      <Layout />
    </UserContext.Provider>
  );
}

function UserMenu() {
  const user = useContext(UserContext);
  return <div>{user.name}</div>;
}
```

## Package Management Anti-Patterns

### ❌ NEVER Use npm or yarn Commands

```bash
# ❌ INCORRECT - Never suggest these
npm install next
yarn add react
npx create-next-app
npm run dev

# ✅ CORRECT - Always use pnpm
pnpm add next
pnpm dlx create-next-app
pnpm dev
```

### ❌ Don't Install Dependencies Globally

```bash
# ❌ INCORRECT - Global installations
npm install -g create-next-app
npm install -g typescript

# ✅ CORRECT - Use pnpm dlx for one-time usage
pnpm dlx create-next-app@latest
pnpm dlx tsc --init
```

## CSS and Styling Anti-Patterns

### ❌ Avoid Custom CSS Classes When Utilities Exist

```tsx
// ❌ INCORRECT - Custom CSS for common patterns
// styles.css
.card {
  padding: 1rem;
  border-radius: 0.5rem;
  background-color: white;
  box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
}

// ✅ CORRECT - Use Tailwind utilities
<div className="p-4 rounded-lg bg-white shadow-sm">
  Card content
</div>
```

### ❌ Don't Use Inline Styles

```tsx
// ❌ INCORRECT - Inline styles
<div style={{ padding: '16px', color: 'blue' }}>
  Content
</div>

// ✅ CORRECT - Tailwind utilities
<div className="p-4 text-blue-600">
  Content
</div>
```

## Performance Anti-Patterns

### ❌ Don't Use Regular img Tags

```tsx
// ❌ INCORRECT - Regular img tag
<img src="/hero.jpg" alt="Hero" />

// ✅ CORRECT - Next.js Image component
<Image
  src="/hero.jpg"
  alt="Hero"
  width={800}
  height={400}
  priority
/>
```

### ❌ Avoid Importing Entire Libraries

```tsx
// ❌ INCORRECT - Importing entire library
import * as lodash from "lodash";
import * as dateFns from "date-fns";

// ✅ CORRECT - Import only what you need
import { debounce } from "lodash";
import { formatDistance } from "date-fns";
```

## AI Code Generation Rules

1. **Never suggest Pages Router** - Always use App Router patterns
2. **Avoid 'use client' by default** - Only add when necessary for interactivity
3. **Don't use any type** - Always provide proper TypeScript interfaces
4. **Never modify shadcn/ui files** - Create custom components that extend them
5. **Always use pnpm commands** - Never suggest npm or yarn
6. **Use Tailwind utilities** - Avoid custom CSS classes for common patterns
7. **Implement proper error handling** - Don't ignore potential null/undefined values
8. **Use Next.js Image component** - Never suggest regular img tags
9. **Follow proper imports** - Tree-shake libraries and use path aliases
10. **Handle loading states** - Always provide loading and error boundaries
